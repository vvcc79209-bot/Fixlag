-- Fix Lag Blox Fruits Lite - Dành cho Delta Executor
-- Mặt đất/biển xám, xóa thừa, effects xám, không chạm nhân vật

local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local Terrain = Workspace.Terrain

local GRAY = Color3.fromRGB(128, 128, 128)

-- Tối ưu lighting
Lighting.GlobalShadows = false
Lighting.FogEnd = 100000
Lighting.Brightness = 2
settings().Rendering.QualityLevel = Enum.QualityLevel.Level01

-- Biển và terrain
Terrain.WaterWaveSize = 0
Terrain.WaterWaveSpeed = 0
Terrain.WaterReflectance = 0
Terrain.WaterTransparency = 0.3

-- Xóa post effects
for _, v in pairs(Lighting:GetChildren()) do
    if v:IsA("PostEffect") then v.Enabled = false end
end

-- Hàm optimize
local function optimize()
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Parent:FindFirstChild("Humanoid") == nil then
            obj.Color = GRAY
            obj.Material = Enum.Material.SmoothPlastic
            obj.Reflectance = 0
            
            -- Biển
            if obj.Name:lower():find("water") or obj.Material == Enum.Material.Water then
                obj.Color = GRAY
                obj.Transparency = 0.3
            end
            
            -- Xóa thừa (cây, nhà, rock...)
            local name = obj.Name:lower()
            if name:find("tree") or name:find("bush") or name:find("rock") or name:find("house") or name:find("building") or name:find("foliage") then
                obj:Destroy()
            end
        elseif obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") or obj:IsA("Fire") or obj:IsA("Smoke") or obj:IsA("Sparkles") then
            obj.Enabled = false  -- Tắt effects skill (Control, Dragon...)
        elseif obj:IsA("Decal") or obj:IsA("Texture") then
            obj.Transparency = 1
        end
    end
end

-- Chạy lần đầu + loop nhẹ
optimize()
spawn(function()
    while wait(2) do  -- Loop chậm hơn để nhẹ máy
        pcall(optimize)
    end
end)

print("Fix Lag Lite Loaded - Delta Compatible!")
